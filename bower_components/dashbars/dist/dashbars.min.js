!function(n,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():n.Dashbars=n.Dashbars||t()}(this,function(){var n=function(){return"undefined"==typeof window?require("moment"):window.moment},t=function(t,r){t("d-iso",function(t){return n()(t).toISOString()}),t("d-format",function(t,r){return n()(r).format(t)}),t("d-now",function(){return new Date}),t("d-date",function(t,r){return n()(r,t).toDate()}),t("d-add",function(t,r,e){return n()(e).add(t,r).toDate()}),t("d-subtract",function(t,r,e){return n()(e).subtract(t,r).toDate()})},r=function(n,t){n("-map",function(n,r){return r.map(t(n))}),n("-sort",function(n,r,e){return n.slice().sort(e&&t(r))}),n("-take",function(n,t){return t.slice(0,n)}),n("-drop",function(n,t){return t.slice(n)}),n("-filter",function(n,r){return r.filter(t(n))}),n("-take-while",function(n,r){return f().takeWhile(r,t(n))}),n("-drop-while",function(n,r){return f().dropWhile(r,t(n))}),n("-slice",function(n,t,r,e){return n.slice(r&&t,e&&r)}),n("-flatten",function(n){return f().flatten(n)}),n("-deep-flatten",function(n){return f().flatten(n,!0)}),n("-array",function(){return Array.prototype.slice.call(arguments,0,-1)}),n("-range",function(n,t,r,e){return f().range(t&&n,r&&t,e&&r)}),n("-object",function(n){return JSON.parse(n)}),n("-size",function(n){return n.length}),n("-find",function(n,r){return f().find(r,t(n).bind(this))}),n("-reduce",function(n,r,e){return e.reduce(t(n),r)}),n("-first",function(n){return f().first(n)}),n("-last",function(n){return f().last(n)}),n("-join",function(n,t,r){return n.join(r?t:"")}),n("-sum",function(n){return n.reduce(function(n,t){return n+t},0)}),n("-product",function(n){return n.reduce(function(n,t){return n*t},1)}),n("-min",function(n){return n.reduce(function(n,t){return t>n?n:t},Number.MAX_VALUE)}),n("-max",function(n){return n.reduce(function(n,t){return n>t?n:t},Number.MIN_VALUE)}),n("-group-by",function(n,r){var e=this;return r.reduce(function(r,u){var i=t(n).call(e,u);return r[i]?r[i].push(u):r[i]=[u],r},{})}),n("-grouped",function(n,t){return f().range(0,t.length,n).map(function(r){return t.slice(r,r+n)})}),n("-every?",function(n,r){return r.every(t(n))}),n("-some?",function(n,r){return r.some(t(n))}),n("-none?",function(n,r){return!r.some(t(n))}),n("-contain?",function(n,t){return t.some(function(t){return t===n})}),n("-union",function(){return Array.prototype.concat.apply(arguments[0],Array.prototype.slice.call(arguments,1,-1))}),n("-difference",function(){return f().difference.apply(null,Array.prototype.slice.call(arguments,0,-1))}),n("-intersection",function(){return f().intersection.apply(null,Array.prototype.slice.call(arguments,0,-1))}),n("-distinct",function(n){return f().unique(n)}),n("-get",function(n,t){return t[n]}),n("-keys",function(n){return Object.keys(n)}),n("-values",function(n){return Object.keys(n).map(function(t){return n[t]})}),n("-json",function(n){return JSON.stringify(n)}),n("-call",function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1,-1);return n.apply(this,t)}),n("-as-is",function(n){return n}),n("-partial",function(){var n=arguments[0],r=Array.prototype.slice.call(arguments,1,-1),e=this;return function(){for(var u=r.slice(),i=0,o=0;o<u.length||i<arguments.length;o++)void 0===u[o]&&(u[o]=arguments[i++]);return t(n).apply(e,u)}}),n("-let",function(n,t){this[n]=t}),n("-log",function(){console.log.call(this,Array.prototype.slice.call(arguments,1,-1))})},e=function(n){return f().isFunction(n)?n:this._helpable.helper(n)||function(){throw Error("not found the helper:"+n)}},u={registerHelper:function(n,t){return this},helper:function(n){return function(){}}},i=function(n){return{registerHelper:function(t,r){return n.registerHelper(t,r),this},helper:function(t){return n.helpers[t]}}},o=function(n){var t=this;return this._helpable=i(n),this._registerers.forEach(function(n){n(t._helpable.registerHelper,t.helper,t.predicate)}),this},c=function(){return s(this._registerers)},s=function(){var n=f().flatten(Array.prototype.slice.call(arguments),!0),t={_registerers:[],_helpable:u};return n.forEach(function(n){t._registerers.push(n)}),t.help=o.bind(t),t.helper=e.bind(t),t.create=c.bind(t),t.cons=s.bind(t),t},f=function(){return"undefined"==typeof window?require("lodash"):window._},a=function(n,t){n("n-even?",function(n){return n%2===0}),n("n-odd?",function(n){return n%2!==0}),n("n-add",function(n,t){return n+t}),n("n-subtract",function(n,t){return n-t}),n("n-multiply",function(n,t){return n*t}),n("n-divide",function(n,t){return n/t})},l=function(n){return!!n},p=function(n,t){n("-is?",l),n("-and?",function(){return Array.prototype.slice.call(arguments,0,-1).every(l)}),n("-or?",function(){return Array.prototype.slice.call(arguments,0,-1).some(l)}),n("-not?",function(n){return!n}),n("-gt?",function(n,t){return n>t}),n("-lt?",function(n,t){return t>n}),n("-ge?",function(n,t){return n>=t}),n("-le?",function(n,t){return t>=n}),n("-ne?",function(n,t){return n!==t}),n("-equal?",function(n,t){return n===t}),n("-deep-equal?",function(n,t){return f().isEqual(n,t)}),n("-in?",function(n,t){return n in t}),n("-has?",function(n,t){return Object.prototype.hasOwnProperty.call(t,n)}),n("-empty?",function(n){return f().isEmpty(n)}),n("-not-empty?",function(n){return!f().isEmpty(n)}),n("-string?",function(n){return f().isString(n)}),n("-array?",function(n){return f().isArray(n)})},d=function(n,t){n("s-size",function(n){return n.length}),n("s-trim",function(n){return n.trim()}),n("s-take",function(n,t){return t.slice(0,n)}),n("s-drop",function(n,t){return t.slice(n)}),n("s-repeat",function(n,t){return new Array(n+1).join(t)}),n("s-concat",function(){return Array.prototype.slice.call(arguments,0,-1).join("")}),n("s-split",function(n,t){return t.split(n)}),n("s-slice",function(n,t,r,e){return n.slice(r&&t,e&&r)}),n("s-reverse",function(n){return n.split("").reverse().join("")}),n("s-replace",function(n,t,r,e,u){return r.replace(new RegExp(n,u&&e),t)}),n("s-match",function(n,t,r,e){return t.match(new RegExp(n,e&&r))||[]}),n("s-lowercase",function(n){return n.toLowerCase()}),n("s-uppercase",function(n){return n.toUpperCase()}),n("s-lowercase?",function(n){return n.toLowerCase()===n}),n("s-uppercase?",function(n){return n.toUpperCase()===n}),n("s-match?",function(n,t,r,e){return new RegExp(n,e&&r).test(t)}),n("s-contain?",function(n,t,r){return n=r?n.toLowerCase():n,t=r?t.toLowerCase():t,t.indexOf(n)>=0}),n("s-start-with?",function(n,t,r){return n=r?n.toLowerCase():n,t=r?t.toLowerCase():t,0===t.indexOf(n)}),n("s-end-with?",function(n,t,r){return n=r?n.toLowerCase():n,t=r?t.toLowerCase():t,t.lastIndexOf(n)===t.length-n.length})};return s(r,p,d,a,t)});